
{{!-- <h1>Display {{title.length}}</h1> --}}
<table class="table table-striped">
    <thead>
        <tr>
            <th>剩餘</th>
            <th>地名</th>
            <th>日期</th>
        </tr>
    </thead>
    <tbody>
        {{#each title}}
            {{#each this}}
            <tr>
                {{!-- <td>{{ color }}</td> --}}
                <td>{{ this.sno }}</td>
                <td>{{ this.sna }}</td>
                <td>{{ this.mday }}</td>
            </tr>
            {{/each}}
        {{/each}}
    </tbody>
</table>
<script type="application/javascript">
var dataset = {{{json title}}};

var margin = {top: 20, right: 80, bottom: 30, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;
// var x = d3.time.scale()
//     .range([0, width]);

// ex: 2016 0227 21
var parseDate = d3.time.format("%Y%m%d%I").parse;

var x = d3.time.scale()
    .range([0, width]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");


var y = d3.scale.linear()
    .range([height, 0]);


var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var color = d3.scale.ordinal()
            .domain(["station1", "station2", "station3","station4"])
            .range(["#21739e", "#e3a826" , "#65942e","a75f15"]);

var line = d3.svg.line()
    .x(function(d) { console.log(d.mday);return d.mday; })
    .y(function(d) { return d.sbi; });

var svgContainer = d3.select("body").append("svg")
                                    .attr("width", width + margin.left + margin.right)
                                    .attr("height", height + margin.top + margin.bottom);



var circles = svgContainer.selectAll("circle")
                          .data(dataset)
                          .enter()
                          .append("circle");


var circleAttributes = circles
                        .attr("cx", function (d) { console.log(d[0].sno);return d[0]["x_axis"]; })
                        .attr("cy", function (d) { return d[0]["y_axis"]; })
                        .attr("r", function (d) { return d[0]["radius"]; })
                        .style("fill", function(d) { return d[0]["color"]; });


x.domain(d3.extent(dataset, function(d) {return parseDate(d[0]["mday"]); }));

svgContainer.append("text")
        .attr("x", (width / 2))             
        .attr("y", margin.top)
        .attr("text-anchor", "middle")  
        .style("font-size", "16px") 
        .text("可借車位");

var youbikestation = svgContainer.selectAll(".station")
              .data(dataset)
              .enter().append("g")
              .attr("class", "station");



youbikestation.append("path")
    .attr("class", "line")
    .attr("d", function(d) { return line(d); })
    .style("stroke", "#FF0000");

svgContainer.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);



</script>
{{!-- {{#section 'script'}}

    <script type="application/javascript">
        $(function() {
            alert( "I'm ready!" );
        });
    </script>

{{/section}} --}}